**Instructions to create the virtual environment in LIneA's JupyterLab to run the DP02_QA_notebook_input notebook**
Last updated: September 4, 2024

1. In LIneA's JupyterLab environment, clean your conda and pip:
```bash
conda clean --all
```
```bash
pip cache purge
```

2. Check if you have the conda-forge channel in your list of channels.
```bash
conda config --show channels
```
If you don't have it, append it to the list.
```bash
conda config --append channels conda-forge
```

3. Create a conda virtual environment named "hv-bokeh", activate it and install all the necessary packages:
```bash
conda create -p $HOME/.conda/envs/hv-bokeh
```
```bash
conda activate hv-bokeh
```
OU
```bash
source activate hv-bokeh
```
```bash
conda install -c conda-forge numpy pandas bokeh holoviews geoviews cartopy dask pyogrio fastparquet ipykernel pyviz_comms jupyter_bokeh
```

4. Make the environment available as a kernel for Jupyter.
```bash
python -m ipykernel install --user --name=hv-bokeh
```

5. Don't forget to copy the following outputs
```bash
basic_stats_no_nan_no_inf.parquet
basic_stats.parquet
histo_2d_ra_dec.parquet
histo_1d_mag_all_bands.parquet
histo_1d_magerr_all_bands.parquet
histo_2d_mag_magerr_all_bands.parquet
histo_2d_mag_color_all_graphs.parquet
histo-2d_color_color_all_graphs.parquet
```
to a folder named ```output``` in the same directory of the DP02_QA_notebook_input.ipynb, for visualizing the results in the notebook. These files can be generated by using the scripts in ```pz-compute/doc/dp02_qa_scripts/``` in LIneA's HPC environment.

6. Install the "jupyter-bokeh" extension in the Jupyter Lab extensions menu (left sidebar, puzzle symbol) and refresh the page.

7. Install the "pyviz-comms" extension in the Jupyter Lab extensions menu (left sidebar, puzzle symbol) and refresh the page.

8. Execute the notebook.

Note: If the graphics do not re-render at first when running the notebook, I recommend that you restart your server (STOP SERVER / START SERVER) and repeat steps 6, 7 and 8.